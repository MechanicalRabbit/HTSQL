<html>
<head>
    <title> HTRAF Demo </title>
    <script type="text/javascript">
        var HTSQL_PREFIX = '/@htsql_regress',
            HTRAF_PREFIX = 'htraf';
    </script>
    <script type="text/javascript" src="htraf/htraf.js"></script>
</head>
<body>
    <h3>Select School</h3>
    <select id="school" data-source="/school{code, name}"></select>
    <h3>Departments</h3>
    <p>Filter By Name <input id="department_name"/></p>
    <table id="department" data-hide-first-column="yes" 
        data-source="/department{code, name, school.name}
                     ?school=$school&name~$department_name">
    </table>
    <p>
        Selected Department: 
        <em data-source="/department{name}?code=$department"></em> <br/>
        Count of Courses in Selected Department: 
        <input data-source="/department{count(course)}?code=$department">
    </p>
    <h3>Courses</h3>
    <table id="department" 
        data-source="/course{*}?department=$department">
    </table>

</body>
</html>
