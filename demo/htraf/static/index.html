<!DOCTYPE html>
<html>
<head>
    <title> HTRAF Demo </title>
    <script type="text/javascript">
        var HTSQL_PREFIX = '/@',
            HTRAF_PREFIX = 'htraf';
    </script>
    <script type="text/javascript" src="htraf/htraf.js"></script>
    <link rel="stylesheet" type="text/css" href="css/custom.css"/>
</head>
<body>
    <h3>Select a School</h3>
    <select id="school" data-source="/school{code, name}"></select>
    <div class="chart"
        data-source="/program{title, count(student)}
                    ?school=$school&count(student)>0" 
        data-display="chart"
        data-chart-title="Percent of Students by Program"></div>
    <h3>Departments</h3>
    <p>Filter by name: <input id="department_name"/></p>
    <table id="department" data-hide-first-column="yes" 
        data-source="/department{code, name, school.name}
                     ?school=$school&name~$department_name">
    </table>
    <p>
        The selected department: 
        <em data-source="/department{name}?code=$department"></em> <br/>
        The number of courses in the selected department: 
        <strong data-source="/department{count(course)}?code=$department">
        </strong>
    </p>
    <h3>Courses</h3>
    <table id="course" 
        data-source="/course?department=$department">
    </table>
</body>
</html>
