
\documentclass{article}

\include{prelude}

\begin{document}

\tikzset{
    > = stealth',
    node distance = 0.5cm and 2cm,
    entity/.style = {fill=black!10, circle,
                     text width=2cm, minimum size=4cm,
                     text centered, font=\small\ttfamily},
    value/.style = {fill=black!10, rectangle,
                    text width=4cm, minimum size=4cm,
                    text centered, font=\small\ttfamily},
    link/.style = {font=\ttfamily, above},
    brace/.style = {decorate, decoration={brace,amplitude=8pt,raise=4pt},
                    draw=blue!50},
    brace header/.style = {below=10pt, font=\itshape\color{blue!75}}
}

\begin{tikzpicture}

\node[entity, label=above:school] (school)
    {$\vdots$ \\ {[eng]} \\ {[la]} \\ {[ns]} \\ $\vdots$};
\node[entity, label=above:program] (program) [right=of school]
    {$\vdots$ \\ {[eng.gee]} \\ {[eng.uelec]} \\ {[la.uhist]} \\
     {[ns.pmth]} \\ {[ns.gmth]} \\ {[ns.umth]} \\ $\vdots$};

\coordinate (eng in)
    at ($ (school) +(15pt,9pt) $);
\coordinate (la in)
    at ($ (school) +(15pt,-2pt) $);
\coordinate (ns in)
    at ($ (school) +(15pt,-13pt) $);

\coordinate (gee 1 out)
    at ($ (program) +(-30pt,26pt) $);
\coordinate (uelec 1 out)
    at ($ (program) +(-30pt,15pt) $);
\coordinate (uhist 1 out)
    at ($ (program) +(-30pt,4pt) $);
\coordinate (pmth 1 out)
    at ($ (program) +(-25pt,-8pt) $);
\coordinate (gmth 1 out)
    at ($ (program) +(-25pt,-19pt) $);
\coordinate (umth 1 out)
    at ($ (program) +(-25pt,-30pt) $);
\coordinate (gee 2 out)
    at ($ (program) +(30pt,26pt) $);
\coordinate (uelec 2 out)
    at ($ (program) +(30pt,15pt) $);
\coordinate (uhist 2 out)
    at ($ (program) +(30pt,4pt) $);
\coordinate (pmth 2 out)
    at ($ (program) +(25pt,-8pt) $);
\coordinate (gmth 2 out)
    at ($ (program) +(25pt,-19pt) $);
\coordinate (umth 2 out)
    at ($ (program) +(25pt,-30pt) $);

\draw[->]
    (gee 1 out) to node[link, above=0.5cm] {school} (eng in);
\draw[->]
    (uelec 1 out) to (eng in);
\draw[->]
    (uhist 1 out) to (la in);
\draw[->]
    (pmth 1 out) to (ns in);
\draw[->]
    (gmth 1 out) to (ns in);
\draw[->]
    (umth 1 out) to (ns in);

\draw[->, bend right=90, looseness=15]
    (uelec 2 out) to (gee 2 out);
\draw[->, bend right=90, looseness=15]
    (gmth 2 out) to (pmth 2 out);
\draw[->, bend right=90, looseness=15]
    (umth 2 out) to (gmth 2 out);

\draw[brace]
    ($ (program.south) -(5pt,0) $)
    -- node[brace header] {a total link}
    ($ (school.south) +(5pt,0) $);
\draw[brace]
    ($ (program.north east) +(35pt,0) $)
    -- node[brace header, sloped, above=10pt] {a partial link}
    ($ (program.south east) +(35pt,0) $);

\end{tikzpicture}

\end{document}

